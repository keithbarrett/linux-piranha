<HTML
><HEAD
><TITLE
>        Components of an LVS Cluster
      </TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"><LINK
REL="HOME"
TITLE="piranha"
HREF="index.html"><LINK
REL="UP"
TITLE="      Linux Virtual Server (LVS)
    "
HREF="ch-lvs.html"><LINK
REL="PREVIOUS"
TITLE="      Linux Virtual Server (LVS)
    "
HREF="ch-lvs.html"><LINK
REL="NEXT"
TITLE="        Background of the LVS Cluster
      "
HREF="x3954.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>piranha  </TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="ch-lvs.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>  Linux Virtual Server (LVS)</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x3954.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN3856"
>Components of an LVS Cluster</A
></H1
><P
>        The components of an LVS cluster are described below.
      </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3865"
><B
CLASS="COMMAND"
>pulse</B
></A
></H2
><P
>          This is the controlling process that starts the other daemons as
          needed. It is started on the LVS routers by the
          <TT
CLASS="FILENAME"
>/etc/rc.d/init.d/pulse</TT
> script, normally at boot
          time . Through <B
CLASS="COMMAND"
>pulse</B
>, which implements a simple
          heartbeat, the inactive LVS router determines the health of the active
          router and whether to initiate failover.
        </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3878"
><B
CLASS="COMMAND"
>lvs</B
></A
></H2
><P
>          The <B
CLASS="COMMAND"
>lvs</B
> daemon runs on the LVS routers. It reads
          the configuration file and calls <B
CLASS="COMMAND"
>ipvsadm</B
> to build
          and maintain the IPVS routing table.
        </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3892"
><B
CLASS="COMMAND"
>nanny</B
></A
></H2
><P
>          The <B
CLASS="COMMAND"
>nanny</B
> monitoring daemon runs on the active LVS
          router. Through this daemon, the active router determines the health
          of each real server and monitors its workload. A separate process runs
          for each service defined on each real server.
        </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3904"
><TT
CLASS="FILENAME"
>/etc/sysconfig/ha/lvs.cf</TT
></A
></H2
><P
>          This is the LVS cluster configuration file. Directly or indirectly,
          all daemons get their configuration information from this file.
        </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3915"
>Piranha Web Interface</A
></H2
><P
>          The Web-based tool for monitoring, configuring, and administering an
          LVS cluster. Normally this is the tool you will use to maintain
          <TT
CLASS="FILENAME"
>/etc/sysconfig/ha/lvs.cf</TT
>, restart the running daemons, and
          monitor an LVS cluster.
        </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3924"
><B
CLASS="COMMAND"
>ipvsadm</B
></A
></H2
><P
>          This tool updates the IPVS routing table in the kernel. The
          <B
CLASS="COMMAND"
>lvs</B
> daemon sets up and administers an LVS cluster
          by calling <B
CLASS="COMMAND"
>ipvsadm</B
> to add, change or delete entries
          in the IPVS routing table.
        </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3937"
><B
CLASS="COMMAND"
>send_arp</B
></A
></H2
><P
>          This program sends out ARP broadcasts when the virtual server address
          changes from one node to another.
        </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3948"
>LVS Cluster &#8212; A Block Diagram</A
></H2
><P
>          This diagram shows the how the various components work together in an
          LVS cluster configuration:
        </P
><DIV
CLASS="FIGURE"
><A
NAME="LVS-COMPONENTS"
></A
><P
><IMG
SRC="./figs/lvs/components.gif"></P
><P
><B
>Figure 8-6.             Components of a Running LVS Cluster
          </B
></P
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="ch-lvs.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x3954.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Linux Virtual Server (LVS)</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="ch-lvs.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Background of the LVS Cluster</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>